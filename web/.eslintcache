[{"F:\\kitty-items\\web\\src\\index.js":"1","F:\\kitty-items\\web\\src\\reportWebVitals.js":"2","F:\\kitty-items\\web\\src\\global\\providers.comp.js":"3","F:\\kitty-items\\web\\src\\global\\config.js":"4","F:\\kitty-items\\web\\src\\pages\\root.page.js":"5","F:\\kitty-items\\web\\src\\pages\\not-found.page.js":"6","F:\\kitty-items\\web\\src\\theme.js":"7","F:\\kitty-items\\web\\src\\pages\\account\\index.js":"8","F:\\kitty-items\\web\\src\\parts\\base.comp.js":"9","F:\\kitty-items\\web\\src\\hooks\\use-current-user.hook.js":"10","F:\\kitty-items\\web\\src\\global\\constants.js":"11","F:\\kitty-items\\web\\src\\hooks\\use-url-address.hook.js":"12","F:\\kitty-items\\web\\src\\hooks\\use-market-items.hook.js":"13","F:\\kitty-items\\web\\src\\hooks\\use-account-items.hook.js":"14","F:\\kitty-items\\web\\src\\hooks\\use-initialized.hook.js":"15","F:\\kitty-items\\web\\src\\hooks\\use-kibbles-balance.hook.js":"16","F:\\kitty-items\\web\\src\\parts\\init-cluster.comp.js":"17","F:\\kitty-items\\web\\src\\parts\\auth-cluster.comp.js":"18","F:\\kitty-items\\web\\src\\parts\\account-items-cluster.comp.js":"19","F:\\kitty-items\\web\\src\\parts\\market-items-cluster.comp.js":"20","F:\\kitty-items\\web\\src\\parts\\balance-cluster.comp.js":"21","F:\\kitty-items\\web\\src\\hooks\\use-flow-balance.hook.js":"22","F:\\kitty-items\\web\\src\\parts\\account-item-cluster.comp.js":"23","F:\\kitty-items\\web\\src\\parts\\market-item-cluster.comp.js":"24","F:\\kitty-items\\web\\src\\util\\sleep.js":"25","F:\\kitty-items\\web\\src\\util\\fmt-kibbles.js":"26","F:\\kitty-items\\web\\src\\util\\fetcher.js":"27","F:\\kitty-items\\web\\src\\util\\normalize-item.js":"28","F:\\kitty-items\\web\\src\\flow\\fetch-account-items.script.js":"29","F:\\kitty-items\\web\\src\\flow\\initialize-account.tx.js":"30","F:\\kitty-items\\web\\src\\flow\\is-account-initialized.script.js":"31","F:\\kitty-items\\web\\src\\flow\\fetch-kibbles-balance.script.js":"32","F:\\kitty-items\\web\\src\\hooks\\use-market-item.hook.js":"33","F:\\kitty-items\\web\\src\\flow\\fetch-flow-balance.script.js":"34","F:\\kitty-items\\web\\src\\hooks\\use-account-item.hook.js":"35","F:\\kitty-items\\web\\src\\flow\\util\\tx.js":"36","F:\\kitty-items\\web\\src\\flow\\cancel-market-listing.tx.js":"37","F:\\kitty-items\\web\\src\\flow\\fetch-market-item.script.js":"38","F:\\kitty-items\\web\\src\\flow\\buy-market-item.tx.js":"39","F:\\kitty-items\\web\\src\\flow\\create-sale-offer.tx.js":"40","F:\\kitty-items\\web\\src\\flow\\fetch-account-item.script.js":"41","F:\\kitty-items\\web\\src\\flow\\util\\batch.js":"42"},{"size":815,"mtime":1621510163260,"results":"43","hashOfConfig":"44"},{"size":375,"mtime":1621510163268,"results":"45","hashOfConfig":"44"},{"size":458,"mtime":1621510163255,"results":"46","hashOfConfig":"44"},{"size":596,"mtime":1621510163255,"results":"47","hashOfConfig":"44"},{"size":986,"mtime":1621510163262,"results":"48","hashOfConfig":"44"},{"size":111,"mtime":1621510163262,"results":"49","hashOfConfig":"44"},{"size":219,"mtime":1621510163275,"results":"50","hashOfConfig":"44"},{"size":5243,"mtime":1621510163261,"results":"51","hashOfConfig":"44"},{"size":59,"mtime":1621510163265,"results":"52","hashOfConfig":"44"},{"size":571,"mtime":1621510163257,"results":"53","hashOfConfig":"44"},{"size":343,"mtime":1621510163255,"results":"54","hashOfConfig":"44"},{"size":184,"mtime":1621510163259,"results":"55","hashOfConfig":"44"},{"size":1186,"mtime":1621510163259,"results":"56","hashOfConfig":"44"},{"size":1346,"mtime":1621510163256,"results":"57","hashOfConfig":"44"},{"size":1981,"mtime":1621510163258,"results":"58","hashOfConfig":"44"},{"size":1312,"mtime":1621510163258,"results":"59","hashOfConfig":"44"},{"size":2384,"mtime":1621510163266,"results":"60","hashOfConfig":"44"},{"size":1600,"mtime":1621510163264,"results":"61","hashOfConfig":"44"},{"size":1362,"mtime":1621510163263,"results":"62","hashOfConfig":"44"},{"size":1291,"mtime":1621510163267,"results":"63","hashOfConfig":"44"},{"size":2268,"mtime":1621510163264,"results":"64","hashOfConfig":"44"},{"size":860,"mtime":1621510163258,"results":"65","hashOfConfig":"44"},{"size":2838,"mtime":1621510163263,"results":"66","hashOfConfig":"44"},{"size":2251,"mtime":1621510163266,"results":"67","hashOfConfig":"44"},{"size":108,"mtime":1621510163277,"results":"68","hashOfConfig":"44"},{"size":228,"mtime":1621510163276,"results":"69","hashOfConfig":"44"},{"size":85,"mtime":1621510163275,"results":"70","hashOfConfig":"44"},{"size":274,"mtime":1621510163276,"results":"71","hashOfConfig":"44"},{"size":792,"mtime":1621510163251,"results":"72","hashOfConfig":"44"},{"size":3260,"mtime":1621510163253,"results":"73","hashOfConfig":"44"},{"size":1729,"mtime":1621510163253,"results":"74","hashOfConfig":"44"},{"size":662,"mtime":1621510163252,"results":"75","hashOfConfig":"44"},{"size":2743,"mtime":1621510163259,"results":"76","hashOfConfig":"44"},{"size":191,"mtime":1621510163251,"results":"77","hashOfConfig":"44"},{"size":1952,"mtime":1621510163256,"results":"78","hashOfConfig":"44"},{"size":1265,"mtime":1621510163254,"results":"79","hashOfConfig":"44"},{"size":924,"mtime":1622101291465,"results":"80","hashOfConfig":"44"},{"size":1203,"mtime":1621510163252,"results":"81","hashOfConfig":"44"},{"size":2414,"mtime":1622101271542,"results":"82","hashOfConfig":"44"},{"size":3016,"mtime":1622101318384,"results":"83","hashOfConfig":"44"},{"size":2029,"mtime":1621510163251,"results":"84","hashOfConfig":"44"},{"size":2253,"mtime":1621510163254,"results":"85","hashOfConfig":"44"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},"1tzdk6d",{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"113","messages":"114","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"115","messages":"116","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"117","messages":"118","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"119","messages":"120","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"121","messages":"122","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"123","messages":"124","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"125","messages":"126","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"127","messages":"128","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"129","messages":"130","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"131","messages":"132","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"133","messages":"134","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"135","messages":"136","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"137","messages":"138","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"139","messages":"140","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"141","messages":"142","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"143","messages":"144","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"145","messages":"146","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"147","messages":"148","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"149","messages":"150","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"151","messages":"152","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"153","usedDeprecatedRules":"88"},{"filePath":"154","messages":"155","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"156","messages":"157","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"158","messages":"159","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"160","messages":"161","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"162","messages":"163","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"164","messages":"165","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"166","messages":"167","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"168","messages":"169","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"170","messages":"171","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},"F:\\kitty-items\\web\\src\\index.js",[],["172","173"],"F:\\kitty-items\\web\\src\\reportWebVitals.js",[],"F:\\kitty-items\\web\\src\\global\\providers.comp.js",[],"F:\\kitty-items\\web\\src\\global\\config.js",[],"F:\\kitty-items\\web\\src\\pages\\root.page.js",[],"F:\\kitty-items\\web\\src\\pages\\not-found.page.js",[],"F:\\kitty-items\\web\\src\\theme.js",[],"F:\\kitty-items\\web\\src\\pages\\account\\index.js",[],"F:\\kitty-items\\web\\src\\parts\\base.comp.js",[],"F:\\kitty-items\\web\\src\\hooks\\use-current-user.hook.js",[],"F:\\kitty-items\\web\\src\\global\\constants.js",[],"F:\\kitty-items\\web\\src\\hooks\\use-url-address.hook.js",[],"F:\\kitty-items\\web\\src\\hooks\\use-market-items.hook.js",[],"F:\\kitty-items\\web\\src\\hooks\\use-account-items.hook.js",[],"F:\\kitty-items\\web\\src\\hooks\\use-initialized.hook.js",[],"F:\\kitty-items\\web\\src\\hooks\\use-kibbles-balance.hook.js",[],"F:\\kitty-items\\web\\src\\parts\\init-cluster.comp.js",[],"F:\\kitty-items\\web\\src\\parts\\auth-cluster.comp.js",[],"F:\\kitty-items\\web\\src\\parts\\account-items-cluster.comp.js",[],"F:\\kitty-items\\web\\src\\parts\\market-items-cluster.comp.js",[],"F:\\kitty-items\\web\\src\\parts\\balance-cluster.comp.js",[],"F:\\kitty-items\\web\\src\\hooks\\use-flow-balance.hook.js",[],"F:\\kitty-items\\web\\src\\parts\\account-item-cluster.comp.js",[],"F:\\kitty-items\\web\\src\\parts\\market-item-cluster.comp.js",[],"F:\\kitty-items\\web\\src\\util\\sleep.js",[],"F:\\kitty-items\\web\\src\\util\\fmt-kibbles.js",[],"F:\\kitty-items\\web\\src\\util\\fetcher.js",[],"F:\\kitty-items\\web\\src\\util\\normalize-item.js",[],"F:\\kitty-items\\web\\src\\flow\\fetch-account-items.script.js",[],"F:\\kitty-items\\web\\src\\flow\\initialize-account.tx.js",[],"F:\\kitty-items\\web\\src\\flow\\is-account-initialized.script.js",[],"F:\\kitty-items\\web\\src\\flow\\fetch-kibbles-balance.script.js",[],"F:\\kitty-items\\web\\src\\hooks\\use-market-item.hook.js",["174"],"import {useEffect} from \"react\"\r\nimport {atomFamily, selectorFamily, useRecoilState} from \"recoil\"\r\nimport {sansPrefix} from \"@onflow/fcl\"\r\nimport {IDLE, PROCESSING} from \"../global/constants\"\r\nimport {useCurrentUser} from \"../hooks/use-current-user.hook\"\r\nimport {useAccountItems} from \"../hooks/use-account-items.hook\"\r\nimport {useKibblesBalance} from \"../hooks/use-kibbles-balance.hook\"\r\nimport {fetchMarketItem} from \"../flow/fetch-market-item.script\"\r\nimport {buyMarketItem} from \"../flow/buy-market-item.tx\"\r\nimport {cancelMarketListing} from \"../flow/cancel-market-listing.tx\"\r\n\r\nfunction expand(key) {\r\n  return key.split(\"|\")\r\n}\r\n\r\nfunction comp(address, id) {\r\n  return [address, id].join(\"|\")\r\n}\r\n\r\nexport const $state = atomFamily({\r\n  key: \"market-item::state\",\r\n  default: selectorFamily({\r\n    key: \"market-item::default\",\r\n    get: key => async () => await fetchMarketItem(...expand(key)),\r\n  }),\r\n})\r\n\r\nexport const $status = atomFamily({\r\n  key: \"market-item::status\",\r\n  default: IDLE,\r\n})\r\n\r\nexport function useMarketItem(address, id) {\r\n  const [cu] = useCurrentUser()\r\n  const ownerItems = useAccountItems(address)\r\n  const cuItems = useAccountItems(cu.addr)\r\n  const kibble = useKibblesBalance(cu.addr)\r\n  const key = comp(address, id)\r\n  const [item, setItem] = useRecoilState($state(key))\r\n  const [status, setStatus] = useRecoilState($status(key))\r\n  const owned = sansPrefix(cu.addr) === sansPrefix(address)\r\n\r\n  useEffect(() => {\r\n    fetchMarketItem(...expand(key)).then(setItem)\r\n  }, [])\r\n\r\n  return {\r\n    ...item,\r\n    status,\r\n    owned,\r\n    async buy() {\r\n      await buyMarketItem(\r\n        {itemID: id, ownerAddress: address},\r\n        {\r\n          onStart() {\r\n            setStatus(PROCESSING)\r\n          },\r\n          async onSuccess() {\r\n            if (address !== cu.addr) {\r\n              ownerItems.refresh()\r\n            }\r\n            cuItems.refresh()\r\n            kibble.refresh()\r\n          },\r\n          async onComplete() {\r\n            setStatus(IDLE)\r\n          },\r\n          async onError(error) {\r\n            // TODO: Handle error\r\n          },\r\n        }\r\n      )\r\n    },\r\n    async cancelListing() {\r\n      await cancelMarketListing(\r\n        {itemID: id},\r\n        {\r\n          onStart() {\r\n            setStatus(PROCESSING)\r\n          },\r\n          async onSuccess() {\r\n            cuItems.refresh()\r\n            kibble.refresh()\r\n          },\r\n          async onComplete() {\r\n            setStatus(IDLE)\r\n          },\r\n          async onError(error) {\r\n            // TODO: Handle error\r\n          },\r\n        }\r\n      )\r\n    },\r\n    async refresh() {\r\n      setStatus(PROCESSING)\r\n      await fetchMarketItem(...expand(key)).then(setItem)\r\n      setStatus(IDLE)\r\n    },\r\n  }\r\n}\r\n","F:\\kitty-items\\web\\src\\flow\\fetch-flow-balance.script.js",[],"F:\\kitty-items\\web\\src\\hooks\\use-account-item.hook.js",[],"F:\\kitty-items\\web\\src\\flow\\util\\tx.js",[],"F:\\kitty-items\\web\\src\\flow\\cancel-market-listing.tx.js",[],"F:\\kitty-items\\web\\src\\flow\\fetch-market-item.script.js",[],"F:\\kitty-items\\web\\src\\flow\\buy-market-item.tx.js",[],"F:\\kitty-items\\web\\src\\flow\\create-sale-offer.tx.js",[],"F:\\kitty-items\\web\\src\\flow\\fetch-account-item.script.js",[],"F:\\kitty-items\\web\\src\\flow\\util\\batch.js",[],{"ruleId":"175","replacedBy":"176"},{"ruleId":"177","replacedBy":"178"},{"ruleId":"179","severity":1,"message":"180","line":45,"column":6,"nodeType":"181","endLine":45,"endColumn":8,"suggestions":"182"},"no-native-reassign",["183"],"no-negated-in-lhs",["184"],"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'key' and 'setItem'. Either include them or remove the dependency array.","ArrayExpression",["185"],"no-global-assign","no-unsafe-negation",{"desc":"186","fix":"187"},"Update the dependencies array to be: [key, setItem]",{"range":"188","text":"189"},[1515,1517],"[key, setItem]"]